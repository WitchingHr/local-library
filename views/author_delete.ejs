<!DOCTYPE html>
<html>
  <%- include('./partials/head.ejs') %>
  <body>
    <div class='container-fluid'>
      <div class='row'>
        <%- include('./partials/nav.ejs') %>
        <div class="col-sm-10">
          <h1><%= title %>: <%= author.name %></h1>
          <p><%= author.lifespan %></p>

          <% if (author_books.length) { %>

            <p><strong>Delete the following books before attempting to delete this author.</strong></p>

            <div style='margin-left:20px;margin-top:20px'>

              <h4>Books</h4>

              <dl>
              <% author_books.forEach(function(book) { %>
                <dt>
                  <a href=<%= book.url %>><%= book.title %></a>
                </dt>
                <dd><%= book.summary %></dd>
              <% }); %>
              </dl>

          <% } else { %>

            <p>Do you really want to delete this Author?</p>

            <form method="POST" action="">
              <div class="form-group">
                <input id="authorid" type="hidden" name="authorid" required value="<%= author._id %>" >
              </div>

              <button type="submit" class="btn btn-primary">Delete</button>
            </form>

          <% } %>
        </div>
      </div>
    </div>
  </body>
</html>
